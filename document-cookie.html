<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><meta property="og:locale" content="en_US"/><link href="https://yowainwright.imgix.net/favicon.png" rel="icon"/><link href="https://yowainwright.imgix.net/apple-icon-120x120.png" rel="apple-touch-icon" itemProp="logo"/><meta name="keywords" content="jeffry, wainwright, jeffry wainwright, code, programmer, artist, athlete, developer, engineer"/><meta name="theme-color" content="#007cf0"/><link rel="manifest" href="https://yowainwright.imgix.net/manifest.json"/><meta name="description" content="Jeffry.in is the daily changelog of Jeffry Wainwright, an engineer living in California."/><meta property="og:site_name" content="Jeffry.in"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="600"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="./_next/static/css/264d8d4c0a9f579d.css" as="style"/><link rel="stylesheet" href="./_next/static/css/264d8d4c0a9f579d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="./_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="./_next/static/chunks/webpack-e85e291ba8f459bf.js" defer=""></script><script src="./_next/static/chunks/framework-581f102fc68ef277.js" defer=""></script><script src="./_next/static/chunks/main-303002b23b7fd6fa.js" defer=""></script><script src="./_next/static/chunks/pages/_app-57e4942e5c6a2f8c.js" defer=""></script><script src="./_next/static/chunks/68-fdb9cdd9da3807db.js" defer=""></script><script src="./_next/static/chunks/pages/%5Bslug%5D-b694efbcbc6c943d.js" defer=""></script><script src="./_next/static/ChSoFSmKS_NIY5bOzz04O/_buildManifest.js" defer=""></script><script src="./_next/static/ChSoFSmKS_NIY5bOzz04O/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlvAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-02AF,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-02AF,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><nav id="site-nav" class="site-nav" role="navigation" itemType="http://schema.org/SiteNavigationElement"><section class="site-nav__container"><a class="logo" href="/"><h3 class="logo__title">j</h3></a><div class="site-nav__links-wrapper"><ul class="site-nav__items"><li class="site-nav__item site-nav__item--resume"><a class="site-nav__link site-nav__link--resume" href="/resume">Resume</a></li><li class="site-nav__item site-nav__item--archive"><a class="site-nav__link site-nav__link--archive" href="/archive">Archive</a></li><li class="site-nav__item site-nav__item--about"><a class="site-nav__link site-nav__link--about" href="/about">About</a></li></ul><button class="site-nav__toggle" title="Toggle Darkmode"><svg viewBox="0 0 24 24"><path d="M9.37 5.51c-.18.64-.27 1.31-.27 1.99 0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"></path></svg></button></div></section></nav><article class="post__article"><header class="post__header"><h1>Document Cookies Are a Useful Tool With A Simple API With Some Nunaces</h1><time class="post__time">February 5, 2022</time></header><section class="post__section"><div class="post__container"><div class="post__content"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Document Cookie</a> is a part of the HTML Document. It&#x27;s used on many, if not most, websites to store data.
Although, <code>document.cookie</code> is a string, there are subtle nuances to its API which can be misunderstood.
In this article, these nuances are explored in <em>just enough</em> detail to, hopefully, make <code>document.cookie</code> even more understandable.</p>
<h2>The Basics of Document Cookie</h2>
<p>Cookies can be created or referenced via the <code>document.cookie</code> property.</p>
<p>To create a cookie, all that is needed is something very simple.</p>
<pre><code class="language-javascript">document.cookie = &#x27;&lt;key&gt;=&lt;value&gt;;&#x27;;
</code></pre>
<p>Reading cookies is very simple as well.</p>
<pre><code class="language-javascript">const cookies = new UrlSearchParams(document.cookie.replaceAll(&#x27;; &#x27;, &#x27;&amp;&#x27;));
cookies.get(&#x27;&lt;key&gt;&#x27;);
</code></pre>
<h2>Cookie Attributes Are Write Only (Nuance 1)</h2>
<p>After reading &quot;The Basics of Document Cookie&quot; section above, Cookies are incredibly simple to understand.
However, if viewing <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">MDN&#x27;s</a> description of <code>document.cookie</code>, you&#x27;ll notice attributes can be added to a cookie to control its behavior.
This concept is easy to understand. However, when viewing the API for adding attributes, it&#x27;s slightly more confusing.</p>
<pre><code class="language-javascript">document.cookie = &#x27;&lt;key1&gt;=value1; expires=&lt;date1&gt;; path=&lt;path&gt;; domain=&lt;domain&gt;; secure; httponly&#x27;;
document.cookie = &#x27;&lt;key2&gt;=value2; expires=&lt;dat2&gt;; path=&lt;path&gt;;secure; httponly&#x27;;
const cookies = new UrlSearchParams(document.cookie);
Object.fromEntries(cookies); // { key1: &#x27;value1&#x27;, key2: &#x27;value2&#x27; }
</code></pre>
<h3>Code Observations</h3>
<ul>
<li>When reading the cookie output, all attributes are removed</li>
<li>Each cookie only has an accessible <code>key</code> and <code>value</code></li>
</ul>
<h3>Browser Observation</h3>
<ul>
<li>Cookie attributes can be viewed in the browser only!</li>
</ul>
<hr/>
<h2>Cookie Updates (Nuance 2)</h2>
<p>Hint, a Cookie cannot be updated. It can only be re-written!
The good news is that because a cookie is only a string containing a key and value separated by a <code>=</code>, it is easy to find a replace with code.</p>
<p>Lets see this in in action!</p>
<pre><code class="language-javascript">const cookies = new UrlSearchParams(document.cookie); // &#x27;&lt;key1&gt;=&lt;value`&gt;;&lt;key2&gt;=&lt;value2&gt;;&#x27;
cookies.set(&#x27;&lt;key&gt;&#x27;, &#x27;&lt;value&gt;&#x27;);
// note: when adding attributes the code  to update a cookie is slightly more complex
</code></pre>
<h3>Code Observation</h3>
<ul>
<li>Cookies can&#x27;t be updated. They can be re-written!</li>
<li>It is important to remember when re-writing a cookie to set necessary attributes!</li>
<li>It is important when designing the tech spec of a cookie to plan for attributes being write-only!</li>
</ul>
<h3>Browser Obverations</h3>
<ul>
<li>When viewing <code>cookies</code> assigned to <code>document.cookie</code> in a string, <code>attributes</code> are removed</li>
<li>Cookie key and value pairs are separated by a <code>=</code> within the <code>cookies</code> string.</li>
<li>Cookies are separated by a <code>;</code> with the <code>cookies</code> string</li>
</ul>
<hr/>
<h2>Adding Multiple Cookies (Nuance 3)</h2>
<p>When retrieving cookies, executing <code>console.log(document.cookie)</code>  will print all of the cookies on the document as key value pairs. In that same space, it isn’t far fetched to think multiple cookies could be added the same way—<code>document.cookie=&#x27;foo=bar; biz=baz;&#x27;</code>. However, that could will only assign the first cookie.</p>
<p>To add multiple cookies, each cookie must be added in a separate <code>document.cookie</code> assignment like the code block below.</p>
<pre><code class="language-javascript">  [{ key: &#x27;foo&#x27;, value: &#x27;bar&#x27; }, { key: &#x27;biz&#x27;, value: &#x27;baz&#x27; }].forEach(({ key, value }) =&gt; document.cookie = `${key}=${value};`);
  document.cookie; // &#x27;foo=bar; biz=baz;&#x27;
</code></pre>
<h3>Code Observation</h3>
<ul>
<li>Add cookies one at a time with the <code>document.cookie=&quot;&lt;key&gt;=&lt;value&gt;;&quot;</code> assignment</li>
<li>Read cookies all at the same time by logging <code>document.cookie</code></li>
<li>Each cookie must be added by assigning a key value pair to <code>document.cookie</code></li>
</ul>
<h2>Reading Multiple Added Cookies (Nuance 4)</h2>
<p>When assigning a cookie, attributes are added with the same value as the key and value pair <code>=</code>, and <code>;</code>.
Weirdly, when retrieving cookies, each cookie represented by a key and value pair is also seperated by a <code>=</code>, and a <code>;</code>.</p>
<pre><code class="language-javascript">document.cookie = &#x27;&lt;key1&gt;=&lt;value1&gt;; expires=&lt;date1&gt;; path=&lt;path&gt;; domain=&lt;domain&gt;; secure; httponly&#x27;;
document.cookie; // &#x27;&lt;key1&gt;=&lt;value1&gt;;&#x27;
</code></pre>
<h3>Code Observation</h3>
<ul>
<li>Don&#x27;t worry about creating a cookie string with attributes and not being able to filter it among cookies and attributes!</li>
<li>Do worry about writing tech spec which accounts for expires to only be re-written, not updated!</li>
<li>Remember cookie keys are are unique, in that if you assign a cookie with the same key, it will overwrite the other cookie!</li>
</ul>
<h2>Deleting Cookies (Nuance 5)</h2>
<p>Deleting cookies is more complicated than expected. In order to delete the cookie, it must be assigned to no value as well as have its <code>Max-age</code> set to <code>-1</code>. It looks like this <code>document.cookie=&quot;foo=; Max-age=-1;&quot;;</code> . There is much discussion on Stackoverflow and the internet on the best way to delete cookies. Often the use of the setting the <code>expires</code> attribute to a date in the past is mentioned. However, defining a historical date seems more complex that setting a the Max-age to <code>-1</code>.</p>
<pre><code class="language-javascript">  document.cookie = &#x27;foo=bar;&#x27;; // foo=bar
  document.cookie = &#x27;foo=; Max-age=-1;&#x27;; // empty
</code></pre>
<h3>Code Observation</h3>
<ul>
<li>Delete cookies by assigning the cookie value to nothing and setting the Max-age or expires</li>
<li><code>Max-age</code> looks like a cleaner way to delete cookies vs <code>expires</code></li>
<li>Deleting cookies is can only be done 1 at a time, just like adding cookies</li>
</ul>
<h3>Browser Observations</h3>
<ul>
<li>If you only set the cookie value to empty (<code>document.cookie = &quot;foo=;&quot;;</code>) (and don&#x27;t set a Max-age or expires), the cookie will still display in the browser, but without value</li>
<li>If you set the cookie value to empty and set the max-age to -1, the cookie will not display in the browser and will be deleted completely (<code>document.cookie = &quot;foo=;max-age=-1;&quot;;</code>)</li>
</ul>
<h2>Final thoughts</h2>
<p>Cookies are a very simple useful way to store data.
The fact that they are write-only and can&#x27;t be updated is important to understand.
Once those 2 points are understood, using cookies should be fun and generally easy.
Lastely, attributes are valuable for managing cookie behavior and keeping them secure!
Just remember they&#x27;re only viewable in a browser&#x27;s dev tools.</p>
<hr/>
<p>Before writing this post, I did get caught up in the nuances I have tried to describe in this article.
I always used <a href="https://github.com/js-cookie/js-cookie">js-cookie</a> or similar so the nuances of <code>document.cookie</code> were hidden.
I wrote this simple utility, <a href="https://github.com/yowainwright/mini-cookies">mini-cookies</a> with 0 dependencies to abstract these nuaces—but in a very mimimal way.
Please reach out if you have suggestions!</p>
<p>Happy Hacking!</p></div><div class="post__giscus"></div></div><aside class="aside"><div class="aside__meta"><header class="aside__header"><h3 class="aside__title">Document Cookies Are a Useful Tool With A Simple API With Some Nunaces</h3></header><section class="share"><h3 class="share__title">Sharing is caring! 💘</h3><nav class="share__nav"><button class="share__button">Copy Link</button></nav></section></div></aside></section></article><footer class="site-footer" role="contentinfo" itemType="http://schema.org/WPFooter"><section class="site-footer__wrapper site-footer__wrapper--main"><article class="site-footer__col site-footer__col--contact"><h3 class="site-footer__title">Contact</h3><address class="site-footer__address"><p class="site-footer__content">Happy to chat, learn, help!</p><p class="site-footer__content"><a href="mailto:yowainwright@gmail.com">yowainwright@gmail.com</a>, Los Angeles, CA</p></address></article><div class="site-footer__col site-footer__col site-footer__col--social"><h3 class="site-footer__title">Connect</h3><nav class="social-footer"><ul class="social-list"><li class="social-list__item social-list__item--showing"><a href="https://github.com/yowainwright" class="social-list__link">Github</a></li><li class="social-list__item social-list__item--showing"><a href="https://instagram.com/yowainwright" class="social-list__link">Instragram</a></li><li class="social-list__item social-list__item--showing"><a href="https://www.linkedin.com/in/jeffrywainwright/" class="social-list__link">LinkedIn</a></li></ul></nav></div><article class="site-footer__col site-footer__col--self"><h3 class="site-footer__title site-footer__title--self">About</h3><figure class="site-footer__figure"><img class="media--circular site-footer__image" src="https://yowainwright.imgix.net/portraits/me-smiling.jpg?w=150&amp;h=150&amp;fit=crop&amp;auto=format" height="100%" width="100%" alt="Me smiling with a beard"/><figcaption class="site-footer__caption"><a class="site-footer__link" href="/"><strong>jeffry.in</strong>, <!-- -->2023</a>, is the blog of<!-- --> <a class="site-footer__link" href="/about">Jeffry (Jeff) Wainwright</a>, a software engineer, person, living in Los Angeles.</figcaption></figure></article></section><section class="site-footer__wrapper site-footer__wrapper--last"><h3 class="site-footer__title site-footer__title--last"><a class="site-footer__link" href="/">jeffry.in ⚡️</a>, <!-- -->2023</h3></section></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Document Cookies Are a Useful Tool With A Simple API With Some Nunaces","layout":"post","readNext":"/","path":"/document-cookie-nuances/","meta":"This brief artice covers nuances of document.cookie and how to use it to store and access data.","featured_image":null,"post_type":"technical","categories":["code","javascript","html"],"date":"February 5, 2022"},"content":"\n[Document Cookie](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie) is a part of the HTML Document. It's used on many, if not most, websites to store data.\nAlthough, `document.cookie` is a string, there are subtle nuances to its API which can be misunderstood.\nIn this article, these nuances are explored in _just enough_ detail to, hopefully, make `document.cookie` even more understandable.\n\n## The Basics of Document Cookie\n\nCookies can be created or referenced via the `document.cookie` property.\n\nTo create a cookie, all that is needed is something very simple.\n\n```javascript\ndocument.cookie = '\u003ckey\u003e=\u003cvalue\u003e;';\n```\n\nReading cookies is very simple as well.\n\n```javascript\nconst cookies = new UrlSearchParams(document.cookie.replaceAll('; ', '\u0026'));\ncookies.get('\u003ckey\u003e');\n```\n\n## Cookie Attributes Are Write Only (Nuance 1)\n\nAfter reading \"The Basics of Document Cookie\" section above, Cookies are incredibly simple to understand.\nHowever, if viewing [MDN's](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie) description of `document.cookie`, you'll notice attributes can be added to a cookie to control its behavior.\nThis concept is easy to understand. However, when viewing the API for adding attributes, it's slightly more confusing.\n\n```javascript\ndocument.cookie = '\u003ckey1\u003e=value1; expires=\u003cdate1\u003e; path=\u003cpath\u003e; domain=\u003cdomain\u003e; secure; httponly';\ndocument.cookie = '\u003ckey2\u003e=value2; expires=\u003cdat2\u003e; path=\u003cpath\u003e;secure; httponly';\nconst cookies = new UrlSearchParams(document.cookie);\nObject.fromEntries(cookies); // { key1: 'value1', key2: 'value2' }\n```\n\n### Code Observations\n\n- When reading the cookie output, all attributes are removed\n- Each cookie only has an accessible `key` and `value`\n\n### Browser Observation\n\n- Cookie attributes can be viewed in the browser only!\n\n---\n\n## Cookie Updates (Nuance 2)\n\nHint, a Cookie cannot be updated. It can only be re-written!\nThe good news is that because a cookie is only a string containing a key and value separated by a `=`, it is easy to find a replace with code.\n\nLets see this in in action!\n\n```javascript\nconst cookies = new UrlSearchParams(document.cookie); // '\u003ckey1\u003e=\u003cvalue`\u003e;\u003ckey2\u003e=\u003cvalue2\u003e;'\ncookies.set('\u003ckey\u003e', '\u003cvalue\u003e');\n// note: when adding attributes the code  to update a cookie is slightly more complex\n```\n\n### Code Observation\n\n- Cookies can't be updated. They can be re-written!\n- It is important to remember when re-writing a cookie to set necessary attributes!\n- It is important when designing the tech spec of a cookie to plan for attributes being write-only!\n\n### Browser Obverations\n\n- When viewing `cookies` assigned to `document.cookie` in a string, `attributes` are removed\n- Cookie key and value pairs are separated by a `=` within the `cookies` string.\n- Cookies are separated by a `;` with the `cookies` string\n\n---\n## Adding Multiple Cookies (Nuance 3)\n\nWhen retrieving cookies, executing `console.log(document.cookie)`  will print all of the cookies on the document as key value pairs. In that same space, it isn’t far fetched to think multiple cookies could be added the same way—`document.cookie='foo=bar; biz=baz;'`. However, that could will only assign the first cookie.\n\nTo add multiple cookies, each cookie must be added in a separate `document.cookie` assignment like the code block below.\n\n```javascript\n  [{ key: 'foo', value: 'bar' }, { key: 'biz', value: 'baz' }].forEach(({ key, value }) =\u003e document.cookie = `${key}=${value};`);\n  document.cookie; // 'foo=bar; biz=baz;'\n```\n\n### Code Observation\n\n- Add cookies one at a time with the `document.cookie=\"\u003ckey\u003e=\u003cvalue\u003e;\"` assignment\n- Read cookies all at the same time by logging `document.cookie`\n- Each cookie must be added by assigning a key value pair to `document.cookie`\n## Reading Multiple Added Cookies (Nuance 4)\n\nWhen assigning a cookie, attributes are added with the same value as the key and value pair `=`, and `;`.\nWeirdly, when retrieving cookies, each cookie represented by a key and value pair is also seperated by a `=`, and a `;`.\n\n```javascript\ndocument.cookie = '\u003ckey1\u003e=\u003cvalue1\u003e; expires=\u003cdate1\u003e; path=\u003cpath\u003e; domain=\u003cdomain\u003e; secure; httponly';\ndocument.cookie; // '\u003ckey1\u003e=\u003cvalue1\u003e;'\n```\n\n### Code Observation\n\n- Don't worry about creating a cookie string with attributes and not being able to filter it among cookies and attributes!\n- Do worry about writing tech spec which accounts for expires to only be re-written, not updated!\n- Remember cookie keys are are unique, in that if you assign a cookie with the same key, it will overwrite the other cookie!\n## Deleting Cookies (Nuance 5)\n\nDeleting cookies is more complicated than expected. In order to delete the cookie, it must be assigned to no value as well as have its `Max-age` set to `-1`. It looks like this `document.cookie=\"foo=; Max-age=-1;\";` . There is much discussion on Stackoverflow and the internet on the best way to delete cookies. Often the use of the setting the `expires` attribute to a date in the past is mentioned. However, defining a historical date seems more complex that setting a the Max-age to `-1`.\n\n```javascript\n  document.cookie = 'foo=bar;'; // foo=bar\n  document.cookie = 'foo=; Max-age=-1;'; // empty\n```\n\n### Code Observation\n\n- Delete cookies by assigning the cookie value to nothing and setting the Max-age or expires\n- `Max-age` looks like a cleaner way to delete cookies vs `expires`\n- Deleting cookies is can only be done 1 at a time, just like adding cookies\n\n### Browser Observations\n\n- If you only set the cookie value to empty (`document.cookie = \"foo=;\";`) (and don't set a Max-age or expires), the cookie will still display in the browser, but without value\n- If you set the cookie value to empty and set the max-age to -1, the cookie will not display in the browser and will be deleted completely (`document.cookie = \"foo=;max-age=-1;\";`)\n\n## Final thoughts\n\nCookies are a very simple useful way to store data.\nThe fact that they are write-only and can't be updated is important to understand.\nOnce those 2 points are understood, using cookies should be fun and generally easy.\nLastely, attributes are valuable for managing cookie behavior and keeping them secure!\nJust remember they're only viewable in a browser's dev tools.\n\n---\n\nBefore writing this post, I did get caught up in the nuances I have tried to describe in this article.\nI always used [js-cookie](https://github.com/js-cookie/js-cookie) or similar so the nuances of `document.cookie` were hidden.\nI wrote this simple utility, [mini-cookies](https://github.com/yowainwright/mini-cookies) with 0 dependencies to abstract these nuaces—but in a very mimimal way.\nPlease reach out if you have suggestions!\n\nHappy Hacking!\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"document-cookie"},"buildId":"ChSoFSmKS_NIY5bOzz04O","assetPrefix":".","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>