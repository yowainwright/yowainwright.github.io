<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><meta property="og:locale" content="en_US"/><link href="https://yowainwright.imgix.net/favicon.png" rel="icon"/><link href="https://yowainwright.imgix.net/apple-icon-120x120.png" rel="apple-touch-icon" itemProp="logo"/><meta name="keywords" content="jeffry, wainwright, jeffry wainwright, code, programmer, artist, athlete, developer, engineer"/><meta name="theme-color" content="#007cf0"/><link rel="manifest" href="https://yowainwright.imgix.net/manifest.json"/><meta name="description" content="Jeffry.in is the daily changelog of Jeffry Wainwright, an engineer living in California."/><meta property="og:site_name" content="Jeffry.in"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="600"/><link rel="icon" href="/favicon.ico"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="./_next/static/css/3a86231f6ea340bf.css" as="style"/><link rel="stylesheet" href="./_next/static/css/3a86231f6ea340bf.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="./_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="./_next/static/chunks/webpack-aa2b3f1cef2d5a5c.js" defer=""></script><script src="./_next/static/chunks/framework-581f102fc68ef277.js" defer=""></script><script src="./_next/static/chunks/main-303002b23b7fd6fa.js" defer=""></script><script src="./_next/static/chunks/pages/_app-3737205a8d972bbe.js" defer=""></script><script src="./_next/static/chunks/68-fdb9cdd9da3807db.js" defer=""></script><script src="./_next/static/chunks/pages/%5Bslug%5D-e413135c576eaed5.js" defer=""></script><script src="./_next/static/XLXTw-sAAXJmn9r9sCY7m/_buildManifest.js" defer=""></script><script src="./_next/static/XLXTw-sAAXJmn9r9sCY7m/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlvAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-02AF,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-02AF,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><nav id="site-nav" class="site-nav" role="navigation" itemType="http://schema.org/SiteNavigationElement"><section class="site-nav__container"><a class="logo" href="/"><h3 class="logo__title">j</h3></a><div class="site-nav__links-wrapper"><ul class="site-nav__items"><li class="site-nav__item site-nav__item--resume"><a class="site-nav__link site-nav__link--resume" href="/resume">Resume</a></li><li class="site-nav__item site-nav__item--archive"><a class="site-nav__link site-nav__link--archive" href="/archive">Archive</a></li><li class="site-nav__item site-nav__item--about"><a class="site-nav__link site-nav__link--about" href="/about">About</a></li></ul><button class="site-nav__toggle" title="Toggle Darkmode"><svg viewBox="0 0 24 24"><path d="M9.37 5.51c-.18.64-.27 1.31-.27 1.99 0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"></path></svg></button></div></section></nav><article class="post__article"><header class="post__header"><h1>TypeScript Init—Getting A Test Driven TypeScript Repository Setup</h1><time class="post__time">May 2, 2018</time></header><section class="post__section"><div class="post__container"><div class="post__content"><p>The Engineering Team at Dollar Shave Club is excited about <a href="https://github.com/Microsoft/TypeScript">TypeScript</a>. I&#x27;m excited too. When I started writing this post, I was not familiar with TypeScript beyond conversations and TypeScript&#x27;s <a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html">getting started tutorials</a>. In this post, I documented getting a TypeScript repository setup to compile, lint, and test TypeScript. While writing this post, I built a <a href="https://github.com/yowainwright/datastructures-ts/tree/master/packages/linked-list">Linked List</a> in TypeScript.</p>
<h2>Tool Decisions</h2>
<p>For this TypeScript exercise, I tried to use the same tools I&#x27;d use to build a plain old open source JavaScript repository—except in TypeScript.</p>
<p>In the table below I broke down the tools I tried to build my first Test Drive Development TypeScript repository.</p>
<p>| Category     | Initial    | Final            | Reason                                                                                                                                                          |
| ------------ | ---------- | ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Build        | Rollup     | TypeScript (TSC) | Rollup worked with minimal effort. I am user TSC because it means 1 less layer of abstraction.                                                                  |
| Type Checker | TypeScript | TypeScript       | TypeScript works well. The feedback in VS Code is immediate and offers clear messaging.                                                                         |
| Testing      | TS-Jest    | TS-Jest          | I was concerned about using TS-Jest because the documentation between it and Jest seemed confusing but it worked. I&#x27;m familiar with Jest so the switch was easy |
| Linting      | TS-Lint    | TS-Lint          | TS-Lint works well in VS Code. As far as the CLI, I&#x27;m still not clear if TS-Lint is working.                                                                    |</p>
<h3>Why I used TypeScript&#x27;s Compiler?</h3>
<p>I initially setup TypeScript with Rollup. Rollup was compiling fine. It seemed like another layer of abstraction. To simplify the amount of configuration, I decided to use TypeScript&#x27;s compiler.</p>
<h3>TS compiler options</h3>
<p>Listed below are some options for compiling TypeScript:</p>
<ul>
<li><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html">TSC</a>—TypeScript&#x27;s Compiler</li>
<li><a href="https://github.com/TypeStrong/ts-loader">Webpack using TS-loader</a>—Webpack&#x27;s abstraction of TS compilation</li>
<li><a href="https://rollupjs.org/guide/en#typescript-declarations">Rollup</a>—Rollup compiles TS automatically</li>
</ul>
<h3>Jest Testing and Linting—in TypeScript</h3>
<p>The Dollar Shave Club team uses <a href="https://facebook.github.io/jest/">Jest</a> for unit testing. Dollar Shave Club&#x27;s standard is for TypeScript projects is to test with <a href="https://github.com/kulshekhar/ts-jest">TS-Jest</a>. Using TS-Jest initially seemed scary but worked without problems. First I added the standard <code>expect(1).toBe(1)</code> test to ensure that my paths to unit tests were correct. Then I followed up with another quick test to ensure that my <code>.ts</code> files were imported correctly. From there, I added tests as I would writing Jest.</p>
<p>For linting, I used <a href="https://palantir.github.io/tslint/">TS-Lint</a> which extends <a href="https://eslint.org/">ESLint</a>. This took little time. I imported TS-Lint, added some configuration and a npm script—that was it. From there I was getting TypeScript Linting Feedback.</p>
<p>I added <a href="http://usejsdoc.org/">JSDocs</a> so that I could make sure to document what the heck I was doing.</p>
<h3>Setting up tests with TS Jest</h3>
<p>Listed below are steps to get <a href="https://github.com/kulshekhar/ts-jest">ts-jest</a> up and running:</p>
<h3>Tests are working and I&#x27;m still alive</h3>
<pre><code class="language-javascript">import { Node } from &#x27;../Node&#x27;
expect(1).toBe(1)
</code></pre>
<h3>Files are importing correctly</h3>
<pre><code class="language-javascript">import { Node } from &#x27;../Node&#x27;

test(&#x27;Jest is working, Node is imported&#x27;, () =&gt; {
  expect(typeof Node).toBe(&#x27;function&#x27;)
})
</code></pre>
<h3>Define the testing interface</h3>
<pre><code class="language-javascript">declare function test (msg: string, test: Function)
declare function expect (result: any)

import { Node } from &#x27;../Node&#x27;

test(&#x27;Jest is working, Node is imported&#x27;, () =&gt; {
  expect(typeof Node).toBe(&#x27;function&#x27;)
})

</code></pre>
<h3>JSDocs</h3>
<p>Listed below are general comment examples for <a href="http://usejsdoc.org/">JSDocs</a></p>
<pre><code class="language-javascript">
  ...
  /**
   * @param {value} value
   * adds a new node to the beginning of the linkedList
   */
  addFirstNode (value: T) {
    this.headNode = this.headNode
      ? new Node(this.headNode.getNodeValue())
      : new Node(value)
    this.nodeCount = this.nodeCount + 1
  }
  ...

</code></pre>
<h2>Problems I had getting started with TypeScript</h2>
<p>I knew there were benefits to be had because some of my team had taken on TypeScript full on. That stated, I did have some frustrations getting setup. I don&#x27;t know if I would have pushed through the few hours of frustration for myself had I not had teammate support. I&#x27;d like to think I would have.</p>
<h3>Here are some problems I had getting started</h3>
<p>Listed below are problems I had getting started with TypeScript:</p>
<ul>
<li>I had problems reading the TypeScript messages in VSCode</li>
<li>I had errors issues with imports in my tests (I spent a lot of time being frustrated here)</li>
<li>Sometimes I have to refresh VSCode after I&#x27;ve made minor changes to see if errors are actual errors</li>
</ul>
<h3>Here are some problems with solutions</h3>
<p>My tests globals are undefined and TypeScript barks at that.</p>
<pre><code class="language-javascript">
declare function test (msg: string, test: Function)
declare function expect (result: any)

// or create a setupJest.js file

</code></pre>
<h3>I can&#x27;t read VSCode errors.</h3>
<blockquote>
<p>Try running TSlint =&gt; the messaging is similar. The usage of node&#x27;s <a href="https://github.com/chalk/chalk">chalk</a> in the commandline can help highlight issues.</p>
</blockquote>
<h3>How do I &quot;tsconfig.json&quot;?</h3>
<blockquote>
<p>Try something like this:</p>
</blockquote>
<pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;dist/components&quot;,
    &quot;module&quot;: &quot;commonjs&quot;,
    &quot;target&quot;: &quot;es5&quot;,
    &quot;lib&quot;: [&quot;es6&quot;, &quot;es2016.array.include&quot;, &quot;es2017&quot;, &quot;dom&quot;],
    &quot;declaration&quot;: true,
    &quot;allowJs&quot;: false,
    &quot;sourceMap&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;baseUrl&quot;: &quot;.&quot;,
    &quot;allowSyntheticDefaultImports&quot;: true,
    &quot;types&quot;: [&quot;jest&quot;, &quot;node&quot;]
  },
  &quot;exclude&quot;: [&quot;**/__tests__/&quot;, &quot;**/*.js&quot;],
  &quot;include&quot;: [&quot;**/*.ts&quot;]
}
</code></pre>
<h3>How do I &quot;tsconfig.jest.json&quot;?</h3>
<blockquote>
<p>Try something like this:</p>
</blockquote>
<pre><code class="language-json">// from package.json
&quot;devDependencies&quot;: {
    &quot;@types/jest&quot;: &quot;^22.2.3&quot;,
    &quot;jest&quot;: &quot;^22.4.3&quot;,
    ...
  },
  &quot;jest&quot;: {
    &quot;transform&quot;: {
      &quot;^.+\\.ts?$&quot;: &quot;ts-jest&quot;
    },
    &quot;testRegex&quot;: &quot;(/__tests__/.*|(\\.|/)(test|spec))\\.(ts?)$&quot;,
    &quot;moduleFileExtensions&quot;: [
      &quot;ts&quot;
    ]
  },

</code></pre>
<h3>How do I <a href="https://github.com/palantir/tslint">ts lint</a>?</h3>
<pre><code class="language-json">{
  &quot;extends&quot;: [&quot;tslint-config-dollarshaveclub&quot;],
  &quot;rules&quot;: {
    &quot;no-unnecessary-type-assertion&quot;: false,
    &quot;trailing-comma&quot;: false,
    &quot;semicolon&quot;: [true, &quot;never&quot;]
  }
}
</code></pre>
<h3>How do I compile my ts?</h3>
<pre><code class="language-json">
 ...
 &quot;scripts&quot;: {
    &quot;build&quot;: &quot;npm run build:ts&quot;,
    &quot;build:ts&quot;: &quot;tsc&quot;,
  ...

</code></pre>
<h3>I do React. What does TS with React look like?</h3>
<pre><code class="language-javascript">
import React, { StatelessComponent } from &#x27;react&#x27;
import classNames from &#x27;classnames&#x27;

interface Crumb {
  active?: boolean
  empty?: boolean
  label: string
  link?: string

interface BreadcrumbsProps extends Readonly&lt;{
  crumbs: Crumb[],
  className?: string
  style?: object
}&gt; { }

const Breadcrumb: StatelessComponent&lt;Crumb&gt; = ({
  active = false,
  empty = false,
  label,
  link = false,
}) =&gt; {
  const crumbClasses = classNames(
    &#x27;ui-breadcrumbs-small__crumb&#x27;,
    &#x27;ui-text--md&#x27;,
    &#x27;ui-color--paper-darkest&#x27;,
    { &#x27;ui-breadcrumbs-small__crumb--active&#x27;: active },
  )
  return empty
    ? (&lt;li className={crumbClasses}&gt;&amp;nbsp;&lt;/li&gt;)
    : (
      &lt;li className={crumbClasses}&gt;
        {link ? &lt;a href={link} className=&#x27;ui-link ui-link--inherit-color&#x27;&gt;{label}&lt;/a&gt; : &lt;span&gt;{label}&lt;/span&gt;}
      &lt;/li&gt;
    )
}

const BreadcrumbsSmall: StatelessComponent&lt;BreadcrumbsProps&gt; = ({
  crumbs,
  className,
  style,
}) =&gt; {
  const inputLabelClass = classNames(
    &#x27;ui-breadcrumbs-small&#x27;,
    &#x27;ui-list--plain&#x27;,
    { [className as string]: !!className },
  )
  return (
    &lt;ul className={inputLabelClass} style={style}&gt;
      {crumbs.map(({ active, empty, label, link }, index) =&gt; &lt;Breadcrumb active={active} empty={empty} label={label} link={link} key={index} /&gt;)}
    &lt;/ul&gt;
  )
}

export default BreadcrumbsSmall

</code></pre>
<h3>I want to export/import Plain Old JavaScript. Can I do that?</h3>
<pre><code class="language-javascript">
export default function stickybits(
  target: string | Element | Element[],
  options?: StickyBits.Options,
): StickyBits

export interface StickyBits {
  cleanup: () =&gt; void
}

export namespace StickyBits {
  export interface Options {
    customStickyChangeNumber?: number | null
    noStyles?: boolean
    stickyBitStickyOffset?: number
    parentClass?: string
    scrollEl?: Element
    stickyClass?: string
    stuckClass?: string
    stickyChangeClass?: string
    useStickyClasses?: boolean
    verticalPosition?: &#x27;top&#x27; | &#x27;bottom&#x27;
  }
}

</code></pre>
<h3>I want to work on a project that imports and exports TS or JS</h3>
<blockquote>
<p>Try something like this:</p>
</blockquote>
<h3>tsconfig.json</h3>
<pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;.&quot;,
    &quot;target&quot;: &quot;exnext&quot;,
    &quot;lib&quot;: [&quot;es6&quot;, &quot;es2016.array.include&quot;, &quot;es2017&quot;, &quot;dom&quot;],
    &quot;sourceMap&quot;: true,
    &quot;allowJs&quot;: true,
    &quot;rootDir&quot;: &quot;.&quot;
  }
}
</code></pre>
<h3>package.json</h3>
<pre><code class="language-json">
...
&quot;scripts&quot;: {
  &quot;build&quot;: &quot;&lt;your js build&gt; &amp;&amp; tsc&quot;,
  ...
}
...

</code></pre>
<p>The solutions above are/were provided by me. I&#x27;m am newer to TypeScript. Use with caution but without fear or blame.</p>
<h2>Conclusion: Why I will be using Types as much as possible</h2>
<p>I&#x27;m not a rocket scientist—far from it. When writing code, I want feedback as quickly as possible as much as possible. After learning how continuous integration, linting and test driven development could help me improve, wanting more support from tools like TypeScript is a no brainer. TypeScript, I&#x27;ve found has not only helped me define Types but it also helps me break down code—making it simpler.</p></div><div class="post__giscus"></div></div><aside class="aside"><div class="aside__meta"><header class="aside__header"><h3 class="aside__title">TypeScript Init—Getting A Test Driven TypeScript Repository Setup</h3></header><section class="share"><nav class="share__nav"><button class="share__button">Share Article Link</button></nav></section></div></aside></section></article><footer class="site-footer" role="contentinfo" itemType="http://schema.org/WPFooter"><section class="site-footer__wrapper site-footer__wrapper--main"><article class="site-footer__col site-footer__col--contact"><h3 class="site-footer__title">Contact</h3><address class="site-footer__address"><p class="site-footer__content">Happy to chat, learn, help!</p><p class="site-footer__content"><a href="mailto:yowainwright@gmail.com">yowainwright@gmail.com</a>, Los Angeles, CA</p></address></article><div class="site-footer__col site-footer__col site-footer__col--social"><h3 class="site-footer__title">Connect</h3><nav class="social-footer"><ul class="social-list"><li class="social-list__item social-list__item--showing"><a href="https://github.com/yowainwright" class="social-list__link">Github</a></li><li class="social-list__item social-list__item--showing"><a href="https://instagram.com/yowainwright" class="social-list__link">Instragram</a></li><li class="social-list__item social-list__item--showing"><a href="https://www.linkedin.com/in/jeffrywainwright/" class="social-list__link">LinkedIn</a></li></ul></nav></div><article class="site-footer__col site-footer__col--self"><h3 class="site-footer__title site-footer__title--self">About</h3><figure class="site-footer__figure"><img class="media--circular site-footer__image" src="https://yowainwright.imgix.net/portraits/me-smiling.jpg?w=150&amp;h=150&amp;fit=crop&amp;auto=format" height="100%" width="100%" alt="Me smiling with a beard"/><figcaption class="site-footer__caption"><a class="site-footer__link" href="/"><strong>jeffry.in</strong>, <!-- -->2023</a>, is the blog of<!-- --> <a class="site-footer__link" href="/about">Jeffry (Jeff) Wainwright</a>, a software engineer, person, living in Los Angeles.</figcaption></figure></article></section><section class="site-footer__wrapper site-footer__wrapper--last"><h3 class="site-footer__title site-footer__title--last"><a class="site-footer__link" href="/">jeffry.in</a>, <!-- -->2023</h3></section></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"TypeScript Init—Getting A Test Driven TypeScript Repository Setup","layout":"post","readNext":"/","meta":"This post documents getting setup with TypeScript—just beyond the Gettings Started TypeScript Tutorials. In this Post I will go through setting up a Test Driven TypeScript project.","featured_image":null,"post_index":60,"categories":["note","story"],"date":"May 2, 2018","path":"/getting-setup-with-ts"},"content":"\nThe Engineering Team at Dollar Shave Club is excited about [TypeScript](https://github.com/Microsoft/TypeScript). I'm excited too. When I started writing this post, I was not familiar with TypeScript beyond conversations and TypeScript's [getting started tutorials](https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html). In this post, I documented getting a TypeScript repository setup to compile, lint, and test TypeScript. While writing this post, I built a [Linked List](https://github.com/yowainwright/datastructures-ts/tree/master/packages/linked-list) in TypeScript.\n\n## Tool Decisions\n\nFor this TypeScript exercise, I tried to use the same tools I'd use to build a plain old open source JavaScript repository—except in TypeScript.\n\nIn the table below I broke down the tools I tried to build my first Test Drive Development TypeScript repository.\n\n| Category     | Initial    | Final            | Reason                                                                                                                                                          |\n| ------------ | ---------- | ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Build        | Rollup     | TypeScript (TSC) | Rollup worked with minimal effort. I am user TSC because it means 1 less layer of abstraction.                                                                  |\n| Type Checker | TypeScript | TypeScript       | TypeScript works well. The feedback in VS Code is immediate and offers clear messaging.                                                                         |\n| Testing      | TS-Jest    | TS-Jest          | I was concerned about using TS-Jest because the documentation between it and Jest seemed confusing but it worked. I'm familiar with Jest so the switch was easy |\n| Linting      | TS-Lint    | TS-Lint          | TS-Lint works well in VS Code. As far as the CLI, I'm still not clear if TS-Lint is working.                                                                    |\n\n### Why I used TypeScript's Compiler?\n\nI initially setup TypeScript with Rollup. Rollup was compiling fine. It seemed like another layer of abstraction. To simplify the amount of configuration, I decided to use TypeScript's compiler.\n\n### TS compiler options\n\nListed below are some options for compiling TypeScript:\n\n- [TSC](https://www.typescriptlang.org/docs/handbook/compiler-options.html)—TypeScript's Compiler\n- [Webpack using TS-loader](https://github.com/TypeStrong/ts-loader)—Webpack's abstraction of TS compilation\n- [Rollup](https://rollupjs.org/guide/en#typescript-declarations)—Rollup compiles TS automatically\n\n### Jest Testing and Linting—in TypeScript\n\nThe Dollar Shave Club team uses [Jest](https://facebook.github.io/jest/) for unit testing. Dollar Shave Club's standard is for TypeScript projects is to test with [TS-Jest](https://github.com/kulshekhar/ts-jest). Using TS-Jest initially seemed scary but worked without problems. First I added the standard `expect(1).toBe(1)` test to ensure that my paths to unit tests were correct. Then I followed up with another quick test to ensure that my `.ts` files were imported correctly. From there, I added tests as I would writing Jest.\n\nFor linting, I used [TS-Lint](https://palantir.github.io/tslint/) which extends [ESLint](https://eslint.org/). This took little time. I imported TS-Lint, added some configuration and a npm script—that was it. From there I was getting TypeScript Linting Feedback.\n\nI added [JSDocs](http://usejsdoc.org/) so that I could make sure to document what the heck I was doing.\n\n### Setting up tests with TS Jest\n\nListed below are steps to get [ts-jest](https://github.com/kulshekhar/ts-jest) up and running:\n\n### Tests are working and I'm still alive\n\n```javascript\nimport { Node } from '../Node'\nexpect(1).toBe(1)\n```\n\n### Files are importing correctly\n\n```javascript\nimport { Node } from '../Node'\n\ntest('Jest is working, Node is imported', () =\u003e {\n  expect(typeof Node).toBe('function')\n})\n```\n\n### Define the testing interface\n\n```javascript\ndeclare function test (msg: string, test: Function)\ndeclare function expect (result: any)\n\nimport { Node } from '../Node'\n\ntest('Jest is working, Node is imported', () =\u003e {\n  expect(typeof Node).toBe('function')\n})\n\n```\n\n### JSDocs\n\nListed below are general comment examples for [JSDocs](http://usejsdoc.org/)\n\n```javascript\n\n  ...\n  /**\n   * @param {value} value\n   * adds a new node to the beginning of the linkedList\n   */\n  addFirstNode (value: T) {\n    this.headNode = this.headNode\n      ? new Node(this.headNode.getNodeValue())\n      : new Node(value)\n    this.nodeCount = this.nodeCount + 1\n  }\n  ...\n\n```\n\n## Problems I had getting started with TypeScript\n\nI knew there were benefits to be had because some of my team had taken on TypeScript full on. That stated, I did have some frustrations getting setup. I don't know if I would have pushed through the few hours of frustration for myself had I not had teammate support. I'd like to think I would have.\n\n### Here are some problems I had getting started\n\nListed below are problems I had getting started with TypeScript:\n\n- I had problems reading the TypeScript messages in VSCode\n- I had errors issues with imports in my tests (I spent a lot of time being frustrated here)\n- Sometimes I have to refresh VSCode after I've made minor changes to see if errors are actual errors\n\n### Here are some problems with solutions\n\nMy tests globals are undefined and TypeScript barks at that.\n\n```javascript\n\ndeclare function test (msg: string, test: Function)\ndeclare function expect (result: any)\n\n// or create a setupJest.js file\n\n```\n\n### I can't read VSCode errors.\n\n\u003e Try running TSlint =\u003e the messaging is similar. The usage of node's [chalk](https://github.com/chalk/chalk) in the commandline can help highlight issues.\n\n### How do I \"tsconfig.json\"?\n\n\u003e Try something like this:\n\n```json\n{\n  \"compilerOptions\": {\n    \"outDir\": \"dist/components\",\n    \"module\": \"commonjs\",\n    \"target\": \"es5\",\n    \"lib\": [\"es6\", \"es2016.array.include\", \"es2017\", \"dom\"],\n    \"declaration\": true,\n    \"allowJs\": false,\n    \"sourceMap\": true,\n    \"esModuleInterop\": true,\n    \"moduleResolution\": \"node\",\n    \"baseUrl\": \".\",\n    \"allowSyntheticDefaultImports\": true,\n    \"types\": [\"jest\", \"node\"]\n  },\n  \"exclude\": [\"**/__tests__/\", \"**/*.js\"],\n  \"include\": [\"**/*.ts\"]\n}\n```\n\n### How do I \"tsconfig.jest.json\"?\n\n\u003e Try something like this:\n\n```json\n// from package.json\n\"devDependencies\": {\n    \"@types/jest\": \"^22.2.3\",\n    \"jest\": \"^22.4.3\",\n    ...\n  },\n  \"jest\": {\n    \"transform\": {\n      \"^.+\\\\.ts?$\": \"ts-jest\"\n    },\n    \"testRegex\": \"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(ts?)$\",\n    \"moduleFileExtensions\": [\n      \"ts\"\n    ]\n  },\n\n```\n\n### How do I [ts lint](https://github.com/palantir/tslint)?\n\n```json\n{\n  \"extends\": [\"tslint-config-dollarshaveclub\"],\n  \"rules\": {\n    \"no-unnecessary-type-assertion\": false,\n    \"trailing-comma\": false,\n    \"semicolon\": [true, \"never\"]\n  }\n}\n```\n\n### How do I compile my ts?\n\n```json\n\n ...\n \"scripts\": {\n    \"build\": \"npm run build:ts\",\n    \"build:ts\": \"tsc\",\n  ...\n\n```\n\n### I do React. What does TS with React look like?\n\n```javascript\n\nimport React, { StatelessComponent } from 'react'\nimport classNames from 'classnames'\n\ninterface Crumb {\n  active?: boolean\n  empty?: boolean\n  label: string\n  link?: string\n\ninterface BreadcrumbsProps extends Readonly\u003c{\n  crumbs: Crumb[],\n  className?: string\n  style?: object\n}\u003e { }\n\nconst Breadcrumb: StatelessComponent\u003cCrumb\u003e = ({\n  active = false,\n  empty = false,\n  label,\n  link = false,\n}) =\u003e {\n  const crumbClasses = classNames(\n    'ui-breadcrumbs-small__crumb',\n    'ui-text--md',\n    'ui-color--paper-darkest',\n    { 'ui-breadcrumbs-small__crumb--active': active },\n  )\n  return empty\n    ? (\u003cli className={crumbClasses}\u003e\u0026nbsp;\u003c/li\u003e)\n    : (\n      \u003cli className={crumbClasses}\u003e\n        {link ? \u003ca href={link} className='ui-link ui-link--inherit-color'\u003e{label}\u003c/a\u003e : \u003cspan\u003e{label}\u003c/span\u003e}\n      \u003c/li\u003e\n    )\n}\n\nconst BreadcrumbsSmall: StatelessComponent\u003cBreadcrumbsProps\u003e = ({\n  crumbs,\n  className,\n  style,\n}) =\u003e {\n  const inputLabelClass = classNames(\n    'ui-breadcrumbs-small',\n    'ui-list--plain',\n    { [className as string]: !!className },\n  )\n  return (\n    \u003cul className={inputLabelClass} style={style}\u003e\n      {crumbs.map(({ active, empty, label, link }, index) =\u003e \u003cBreadcrumb active={active} empty={empty} label={label} link={link} key={index} /\u003e)}\n    \u003c/ul\u003e\n  )\n}\n\nexport default BreadcrumbsSmall\n\n```\n\n### I want to export/import Plain Old JavaScript. Can I do that?\n\n```javascript\n\nexport default function stickybits(\n  target: string | Element | Element[],\n  options?: StickyBits.Options,\n): StickyBits\n\nexport interface StickyBits {\n  cleanup: () =\u003e void\n}\n\nexport namespace StickyBits {\n  export interface Options {\n    customStickyChangeNumber?: number | null\n    noStyles?: boolean\n    stickyBitStickyOffset?: number\n    parentClass?: string\n    scrollEl?: Element\n    stickyClass?: string\n    stuckClass?: string\n    stickyChangeClass?: string\n    useStickyClasses?: boolean\n    verticalPosition?: 'top' | 'bottom'\n  }\n}\n\n```\n\n### I want to work on a project that imports and exports TS or JS\n\n\u003e Try something like this:\n\n### tsconfig.json\n\n```json\n{\n  \"compilerOptions\": {\n    \"outDir\": \".\",\n    \"target\": \"exnext\",\n    \"lib\": [\"es6\", \"es2016.array.include\", \"es2017\", \"dom\"],\n    \"sourceMap\": true,\n    \"allowJs\": true,\n    \"rootDir\": \".\"\n  }\n}\n```\n\n### package.json\n\n```json\n\n...\n\"scripts\": {\n  \"build\": \"\u003cyour js build\u003e \u0026\u0026 tsc\",\n  ...\n}\n...\n\n```\n\nThe solutions above are/were provided by me. I'm am newer to TypeScript. Use with caution but without fear or blame.\n\n## Conclusion: Why I will be using Types as much as possible\n\nI'm not a rocket scientist—far from it. When writing code, I want feedback as quickly as possible as much as possible. After learning how continuous integration, linting and test driven development could help me improve, wanting more support from tools like TypeScript is a no brainer. TypeScript, I've found has not only helped me define Types but it also helps me break down code—making it simpler.\n"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"getting-setup-with-ts"},"buildId":"XLXTw-sAAXJmn9r9sCY7m","assetPrefix":".","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>