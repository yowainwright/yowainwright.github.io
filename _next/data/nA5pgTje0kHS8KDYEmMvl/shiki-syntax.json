{"pageProps":{"frontmatter":{"title":"Shiki Syntax Highlighting: More features for markdown","meta":"Comprehensive Shiki syntax highlighting implementation with custom themes, diff notation, line highlighting, focus modes, error annotations, interactive copy buttons, and optimized Sass architecture using a scalable variable system.","tags":["Shiki","Syntax Highlighting","Sass","CSS","Performance"],"date":"August 31, 2025","path":"/shiki-syntax"},"content":"<p><a href=\"https://shiki.matsu.io/\">Shiki</a>'s been used on this site for some time. ^^But it was missing several key features that Shiki provides out of the box, including language badges, custom transformers for enhanced metadata, and more granular control over code block styling.^^</p>\n<h2>TL;DR</h2>\n<p><code>https://jeffry.in</code> is updated with Shiki codeblocks, including:</p>\n<ul>\n<li><strong>Transformers for</strong> for titles, diffs, and tooltips</li>\n<li><strong>Enhanced CSS</strong> with sticky line numbers and proper dark mode support</li>\n<li><strong>Simplified Giscus integration</strong> using built-in themes, and</li>\n<li><strong>Performance optimizations</strong> with <a href=\"https://nextjs.org/\">Next.js</a> dynamic imports</li>\n</ul>\n<hr>\n<h2>Syntax Highlighting Overview</h2>\n<p>Here's a simple example. In code block below, you'll observe, a title, the languages, a copy button and Shiki syntax highlighting.</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Basic JavaScript Example</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> greeting</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> \"Hello, Shiki!\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> numbers</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">[</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">1</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">2</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">3</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">4</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">5</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> calculateSum</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">arr</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  return</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> arr</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">reduce</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">sum</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">num</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">=</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">></span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> sum</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> +</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> num</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">console</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">log</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">greeting</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">console</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">log</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">`Sum: </span><span style=\"color:#999999;--shiki-dark:#999999\">${</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">calculateSum</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">numbers</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#999999;--shiki-dark:#999999\">}</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">`</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span></code></pre></div>\n<h2>Language Support</h2>\n<p>Shiki supports multiple programming languages out of the box. However, I wanted to add the language as a badge which was harder than expected.\nI found I could view that information from Shiki but I wasn't able to hoist it to code block headers as easily as I would have liked.\nShiki's transformer architecture transformers and executes at different stages of the rendering pipeline, and language metadata isn't always accessible in the pre-processing phase where it can be injected into header elements. <code>code()</code> and <code>preprocess()</code> hooks run at different times, and getting data to flow between them requires a little state management through the options object.</p>\n<h3>TypeScript with Type Annotations</h3>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">TypeScript Example</div><div class=\"shiki-language\">TYPESCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">interface</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> User</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  id</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> number</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  name</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> string</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  email</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> string</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  isActive</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> boolean</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">class</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> UserService</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  private</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> users</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> User</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">  addUser</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">user</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> User</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> void</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    this</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">users</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">push</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">user</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">  getActiveUsers</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> User</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">    return</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> this</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">users</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">filter</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">user</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\"> =</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">></span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> user</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">isActive</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> service</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> new</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> UserService</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span></code></pre></div>\n<p>I was able to hack my way to the functionality I wanted. The key was creating a custom transformer that stores language information in the root node's data attributes during the <code>root()</code> phase, then injecting the badge element during the <code>pre()</code> phase when the parent container is available. This approach ensures the language badge appears in the header alongside titles and other metadata.^^</p>\n<h3>With Python Example</h3>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Python Data Processing</div><div class=\"shiki-language\">PYTHON</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">import</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> pandas </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">as</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> pd</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">import</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> numpy </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">as</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> np</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">def</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> process_data</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">data</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">:</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"\"\"Process and analyze data using pandas.\"\"\"</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    df </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> pd.DataFrame</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">data</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">    # Calculate statistics</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    mean_value </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> df</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">[</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'value'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.mean</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    std_dev </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> df</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">[</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'value'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.std</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">    return</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">        'mean'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: mean_value,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">        'std'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: std_dev,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">        'count'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">len</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">df</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\"># Sample data</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">data </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    'id'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">1</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">2</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">3</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">4</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">5</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    'value'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">10</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">20</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">15</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">25</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">30</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">result </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> process_data</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">data</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span></span>\n<span class=\"line\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">print</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">f</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"Analysis complete: </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">result</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span></span></code></pre></div>\n<h3>With CSS example</h3>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Modern CSS Styling</div><div class=\"shiki-language\">CSS</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#D7BA7D;--shiki-dark:#D7BA7D\">:root</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  --primary-color</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">#3b82f6</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  --secondary-color</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">#8b5cf6</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  --spacing-unit</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">1</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">rem</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  --border-radius</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0.5</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">rem</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D7BA7D;--shiki-dark:#D7BA7D\">.card</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  background</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">linear-gradient</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">135</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">deg</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">var</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">--primary-color</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">var</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">--secondary-color</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  padding</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">calc</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">var</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">--spacing-unit</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">*</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 2</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  border-radius</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">var</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">--border-radius</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  box-shadow</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 10</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">px</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 30</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">px</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> rgba</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0.1</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  transition</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: transform </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0.3</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">s</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> ease</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D7BA7D;--shiki-dark:#D7BA7D\">.card:hover</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  transform</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">translateY</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">-5</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">px</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  box-shadow</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 15</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">px</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 40</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">px</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> rgba</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0.15</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">@container</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">min-width: 768px</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#D7BA7D;--shiki-dark:#D7BA7D\">  .card</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    grid-template-columns</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">repeat</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">auto-fit</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">minmax</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">250</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">px</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">1</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">fr</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h3>Diff Notation</h3>\n<p>Show additions and deletions in code:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Code Changes</div><div class=\"shiki-language\">DIFF</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">function calculateTotal</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">items</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  let total = 0;</span></span>\n<span class=\"line diff remove\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">- for </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">let i = 0; i </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">&#x3C;</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> items.length; i++</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line diff remove\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">-   total += items</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">[</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">i</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">]</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">.price;</span></span>\n<span class=\"line diff remove\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">- </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line diff add\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">+ total = items.reduce</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">sum, item</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">></span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> sum + item.price, 0</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  return total;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h3>Line Highlighting</h3>\n<p>Highlight specific lines to draw attention:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Important Lines</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> config</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  apiUrl:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> 'https://api.example.com'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line highlighted\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  timeout:</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 5000</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,           </span><span style=\"color:#6A9955;--shiki-dark:#6A9955\">// These lines are highlighted</span></span>\n<span class=\"line highlighted\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  retryAttempts:</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 3</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,        </span><span style=\"color:#6A9955;--shiki-dark:#6A9955\">// to show important config</span></span>\n<span class=\"line highlighted\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  enableLogging:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> true</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,     </span><span style=\"color:#6A9955;--shiki-dark:#6A9955\">// values</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  headers:</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line highlighted\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    'Content-Type'</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> 'application/json'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,  </span><span style=\"color:#6A9955;--shiki-dark:#6A9955\">// This line too!</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span></code></pre></div>\n<h3>Word Highlighting</h3>\n<p>Highlight specific words or patterns:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Security Considerations</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\" class=\"highlighted-word\">password</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> \"secret123\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">; </span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> apiKey</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> process</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">env</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\" class=\"highlighted-word\">API_KEY</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">; </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\" class=\"highlighted-word\">authenticate</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">user</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">pass</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">  // Never store </span><span style=\"color:#6A9955;--shiki-dark:#6A9955\" class=\"highlighted-word\">password</span><span style=\"color:#6A9955;--shiki-dark:#6A9955\">s in plain text</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> hashedPassword</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> hash</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">pass</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  return</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> validateCredentials</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">user</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">hashedPassword</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h3>Focus Lines</h3>\n<p>Focus on specific sections while dimming others:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Focus Example</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark has-focused\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code>\n<span class=\"line focused\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> processUserData</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">userData</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line focused\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">  // Validation</span></span>\n<span class=\"line focused\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">!</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">userData</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> ||</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> !</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">userData</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">email</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line focused\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">    throw</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> new</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> Error</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'Invalid user data'</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">  // This is the important part to focus on</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> normalizedEmail</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> userData</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">email</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">toLowerCase</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">trim</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> username</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> normalizedEmail</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">split</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'@'</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">  // Save to database</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  return</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> saveUser</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">    ...</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">userData</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    email:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> normalizedEmail</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    username</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h3>Error Level Annotations</h3>\n<p>Show warnings and errors in code:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Error Handling</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark has-highlighted\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> divideNumbers</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">a</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">b</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line highlighted error\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">b</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> ===</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 0</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span></span>\n<span class=\"line highlighted error\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">    throw</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> new</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> Error</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'Division by zero!'</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">; </span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span></span>\n<span class=\"line highlighted warning\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">typeof</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> a</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> !==</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> 'number'</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> ||</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> typeof</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> b</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> !==</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> 'number'</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span></span>\n<span class=\"line highlighted warning\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    console</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">warn</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'Non-numeric input detected'</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">; </span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  return</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> a</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> /</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> b</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h2>Long Code with Horizontal Scrolling</h2>\n<p>Here's an example with long lines to demonstrate the copy button staying visible:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">Long Lines Example</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> veryLongConfigurationObject</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">apiEndpoint:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> \"https://api.example.com/v1/users\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">timeout:</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 5000</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">retryAttempts:</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 3</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">headers:</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"Content-Type\"</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> \"application/json\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"Authorization\"</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> \"Bearer token_goes_here\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">options:</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">enableCache:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> true</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">cacheTimeout:</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 3600</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">enableLogging:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> true</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">logLevel:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> \"debug\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> anotherLongLine</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> \"This is a very long string that extends far beyond the typical viewport width to demonstrate how the syntax highlighting handles horizontal scrolling while keeping the copy button accessible and visible at all times.\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span></code></pre></div>\n<h2>JSON Configuration (and no title)</h2>\n<div class=\"shiki-wrapper\"><div class=\"shiki-language\">JSON</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  \"name\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"shiki-demo\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  \"version\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"1.0.0\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  \"description\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"Showcasing Shiki syntax highlighting features\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  \"themes\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"light\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"custom-light\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"dark\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"custom-dark\"</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">  \"transformers\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">: </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"notationDiff\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"notationHighlight\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"notationWordHighlight\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"notationFocus\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"notationErrorLevel\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"metaHighlight\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"metaWordHighlight\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"colorizedBrackets\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"twoslash\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"copyButton\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"title\"</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    \"languageBadge\"</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h2>Implementation Details: What Changed</h2>\n<h3>1. React-Based Copy Button with Dynamic Mounting</h3>\n<p>Replaced the inline SVG copy button with a React component that gets dynamically mounted:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">hooks/useCodeBlocks.tsx - Dynamic Copy Button Mounting</div><div class=\"shiki-language\">TYPESCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">export</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\"> function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> useCodeBlocks</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> rootsRef</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> useRef</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">&#x3C;</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">Map</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">&#x3C;</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">HTMLElement</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">Root</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">></span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">></span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">new</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> Map</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> mountCopyButtons</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> useCallback</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">=</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">></span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">    const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> placeholders</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> document</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">querySelectorAll</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'.copy-button-placeholder'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    placeholders</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">forEach</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">placeholder</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">=</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">></span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">      const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> element</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> placeholder</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> as</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> HTMLElement</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">      const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> codeId</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> element</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">getAttribute</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'data-code-id'</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">      </span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">      if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">!</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">codeId</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> ||</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> rootsRef</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">current</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">has</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">element</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">return</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">      </span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">      const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> root</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> createRoot</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">element</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">      root</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">render</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">&#x3C;</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">CopyButton</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> codeId</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">=</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">codeId</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> /</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">></span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">      rootsRef</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">current</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">set</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">element</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">root</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">[</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">]</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">  // MutationObserver watches for new code blocks added dynamically</span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">  // ... observer setup code</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">components/CopyButton.tsx - React Copy Component</div><div class=\"shiki-language\">TSX</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">export</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> default</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\"> function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> CopyButton</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">codeId</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">:</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> CopyButtonProps</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  const</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">[</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">copied</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">setCopied</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> useState</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">false</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">  const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> handleCopy</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\"> async</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">=</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">></span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">    const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> codeElement</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> document</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">querySelector</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">`#</span><span style=\"color:#999999;--shiki-dark:#999999\">${</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">codeId</span><span style=\"color:#999999;--shiki-dark:#999999\">}</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> code`</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">    if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">!</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">codeElement</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">return</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">    const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> code</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> codeElement</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">textContent</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> ||</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> ''</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">    await</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> navigator</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">clipboard</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">writeText</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">code</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span></span>\n<span class=\"line\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">    setCopied</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">true</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">    setTimeout</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">=</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">></span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> setCopied</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">false</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">2000</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  return</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#999999\">    </span><span style=\"color:#999999;--shiki-dark:#999999\">&#x3C;</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">button</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> className</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">\"shiki-copy-button\"</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> onClick</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">handleCopy</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span><span style=\"color:#999999;--shiki-dark:#999999\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#999999\">      </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">copied</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> ?</span><span style=\"color:#999999;--shiki-dark:#999999\"> </span><span style=\"color:#999999;--shiki-dark:#999999\">&#x3C;</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">Check</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> size</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">16</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span><span style=\"color:#999999;--shiki-dark:#999999\"> /</span><span style=\"color:#999999;--shiki-dark:#999999\">></span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> :</span><span style=\"color:#999999;--shiki-dark:#999999\"> </span><span style=\"color:#999999;--shiki-dark:#999999\">&#x3C;</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">Copy</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> size</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">=</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">16</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span><span style=\"color:#999999;--shiki-dark:#999999\"> /</span><span style=\"color:#999999;--shiki-dark:#999999\">></span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#999999\">    </span><span style=\"color:#999999;--shiki-dark:#999999\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#999999\">/</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">button</span><span style=\"color:#999999;--shiki-dark:#999999\">></span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h3>2. Custom Transformers for Enhanced Features</h3>\n<p>Created custom Shiki transformers to handle titles and diff lines:</p>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">utils.ts - Custom Title Transformer</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> transformerTitle</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  return</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    name:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> 'title'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">    preprocess</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">code</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">options</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">      // Extract title from comments like: // [title: My Title]</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">      if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">!</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">code</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">includes</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'[title:'</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">return</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> code</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">      </span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">      const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> lines</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> code</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">split</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">\\n</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">      const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> firstLine</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> lines</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">[</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">]</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">      const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> titleStart</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> firstLine</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">indexOf</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'[title:'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">      const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> titleEnd</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> firstLine</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">indexOf</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">']'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">titleStart</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">      </span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">      if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">titleStart</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> !==</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> -</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">1</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> &#x26;&#x26;</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> titleEnd</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">></span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> titleStart</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">        const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> title</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> firstLine</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">slice</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">titleStart</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> +</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\"> 7</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">titleEnd</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">trim</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">        options</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">meta</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">...</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">options</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">meta</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">title</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">        return</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> lines</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">slice</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">1</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">join</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">\\n</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">; </span><span style=\"color:#6A9955;--shiki-dark:#6A9955\">// Remove title line from code</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">      </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">      return</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> code</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<div class=\"shiki-wrapper\"><div class=\"shiki-header\"><div class=\"shiki-title\">utils.ts - Diff Lines Transformer</div><div class=\"shiki-language\">JAVASCRIPT</div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div></div><div class=\"copy-button-placeholder\" data-code-id=\"code-block-1\"></div><pre class=\"shiki shiki-themes theme-custom-light theme-custom-dark\" style=\"background-color:#f9f9f9;--shiki-dark-bg:#031030;color:#000000;--shiki-dark:#b3d8e5\" tabindex=\"0\" id=\"code-block-1\"><code><span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">function</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> transformerDiffLines</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">{</span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">  return</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">    name:</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\"> 'diff-lines'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">,</span></span>\n<span class=\"line\"><span style=\"color:#E2657E;--shiki-dark:#E2657E\">    code</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">node</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">      node</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">children</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">?.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">forEach</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">line</span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">=</span><span style=\"color:#569CD6;--shiki-dark:#569CD6\">></span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">{</span></span>\n<span class=\"line\"><span style=\"color:#569CD6;--shiki-dark:#569CD6\">        const</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> firstText</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> =</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\"> getFirstText</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">line</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">children</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">[</span><span style=\"color:#B5CEA8;--shiki-dark:#B5CEA8\">0</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">]</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">        </span></span>\n<span class=\"line\"><span style=\"color:#E194B5;--shiki-dark:#E194B5\">        if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">firstText</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">startsWith</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'+'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">          // Add classes for additions</span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">          line</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">properties</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">class</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">push</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'diff'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'add'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">        </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"color:#E194B5;--shiki-dark:#E194B5\">else</span><span style=\"color:#E194B5;--shiki-dark:#E194B5\"> if</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">firstText</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">startsWith</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'-'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\"> </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">{</span></span>\n<span class=\"line\"><span style=\"color:#6A9955;--shiki-dark:#6A9955\">          // Add classes for deletions  </span></span>\n<span class=\"line\"><span style=\"color:#007CF0;--shiki-dark:#007CF0\">          line</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">properties</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">class</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">.</span><span style=\"color:#E2657E;--shiki-dark:#E2657E\">push</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">(</span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'diff'</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">, </span><span style=\"color:#007CF0;--shiki-dark:#007CF0\">'remove'</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">        </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">      </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"--shiki-dark:#FFD700;color:#FFD700\">)</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">    </span><span style=\"--shiki-dark:#179FFF;color:#179FFF\">}</span></span>\n<span class=\"line\"><span style=\"color:#000000;--shiki-dark:#B3D8E5\">  </span><span style=\"--shiki-dark:#DA70D6;color:#DA70D6\">}</span><span style=\"color:#000000;--shiki-dark:#B3D8E5\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-dark:#FFD700;color:#FFD700\">}</span></span></code></pre></div>\n<h3>3. Improved CSS Architecture</h3>\n<p>Rewrote the code block styles with:</p>\n<ul>\n<li>Table-based layout for proper line numbering</li>\n<li>Sticky positioning for line numbers during scroll</li>\n<li>Dark mode support with CSS custom properties</li>\n<li>Optimized Sass using scalable variable system (<code>$m-*</code> sizing, <code>$radius-*</code> for borders)</li>\n</ul>\n<h3>4. Giscus Theme &#x26; Dynamic Import Improvements</h3>\n<ul>\n<li>Switched from custom-hosted CSS to built-in Giscus themes (<code>dark</code>/<code>light</code>)</li>\n<li>Replaced lazy loading with Next.js dynamic imports for better SSR handling</li>\n<li>Added proper loading states and error boundaries</li>\n</ul>\n<h2>^^Key Challenges and Lessons Learned^^</h2>\n<p>^^Throughout this implementation, several challenges emerged that required creative solutions:^^</p>\n<p>^^<strong>1. Transformer Execution Order</strong> - Understanding when each transformer hook executes was crucial. The <code>preprocess()</code> hook runs before tokenization, <code>code()</code> during rendering, and <code>pre()</code> after the code block is assembled. Getting data to flow between these stages required careful use of the options object and node properties.^^</p>\n<p>^^<strong>2. React Hydration Issues</strong> - Initially, server-rendered copy buttons would fail to hydrate properly in Next.js. The solution was to use placeholders during SSR and dynamically mount React components client-side using a MutationObserver to detect new code blocks.^^</p>\n<p>^^<strong>3. Sticky Positioning in Tables</strong> - Achieving sticky line numbers while maintaining proper code alignment required switching from a flex layout to a table-based layout. This allowed line numbers to remain visible during horizontal scrolling while the code content scrolls naturally.^^</p>\n<p>^^<strong>4. Dark Mode Background Overrides</strong> - Shiki applies inline background colors from its themes, which can override CSS custom properties. The solution was using <code>!important</code> flags specifically scoped to dark mode contexts, ensuring the theme background is properly overridden.^^</p>\n<p>^^<strong>5. Copy Button State Management</strong> - Managing the copied state across multiple code blocks required generating unique IDs for each block and ensuring the React components properly tracked which block was just copied from. The <code>data-code-id</code> attribute system solved this cleanly.^^</p>\n<h2>Conclusion</h2>\n<p>The enhanced Shiki implementation now provides:</p>\n<ol>\n<li><strong>React-Based Interactivity</strong> - Dynamic copy button mounting with proper state management</li>\n<li><strong>Custom Transformers</strong> - Title extraction, diff highlighting, and tooltip support</li>\n<li><strong>Improved CSS Architecture</strong> - Table-based layout for proper line numbering and sticky positioning</li>\n<li><strong>Dark Mode Support</strong> - Seamless theme switching with custom color overrides</li>\n<li><strong>Performance Optimizations</strong> - Efficient dynamic imports and debounced DOM observations</li>\n</ol>\n<p>^^These improvements make code blocks more readable, functional, and interactive across all devices and themes. The combination of Shiki's powerful syntax highlighting engine with custom transformers and React-based interactivity creates a robust solution that handles everything from simple code snippets to complex examples with annotations, highlighting, and diff notation.^^</p>\n<p>^^For developers looking to implement similar features, the key takeaways are:^^\n^^- Invest time in understanding Shiki's transformer lifecycle - it's more flexible than it initially appears^^\n^^- Use React's dynamic mounting capabilities for interactive elements that need state management^^\n^^- Don't fight against inline styles - work with them using scoped overrides when necessary^^\n^^- Test thoroughly across SSR and CSR scenarios to catch hydration mismatches early^^</p>\n<p>^^The result is a code highlighting system that not only looks great but also provides the interactive features modern technical documentation demands.^^</p>\n<p>This comprehensive implementation ensures that code snippets are not just functional but also beautiful and user-friendly across all devices and themes, with optimized Sass using a scalable variable system for maintainability.</p>","slug":"shiki-syntax"},"__N_SSG":true}