{"pageProps":{"frontmatter":{"title":"Quick Tutorial: Run Intel Mac Cmds On Your M1 Mac Like a Boss In 5 Minutes","meta":"This document describes solving M1 Mac vs Intel Mac terminal command discrepancies by creating a copy of your terminal and setting it up to run Intel Mac terminal commands using Rosetta.","categories":["m1","terminal","rosetta"],"date":"December 13, 2022","path":"/m1-intel-terminal-cmds-like-a-boss"},"content":"<p>After using terminals (iTerm, Terminal, Kitty) with an M1 Mac without issue for over a year, I finally came upon an issue that I couldn‚Äôt solve without using <a href=\"https://support.apple.com/en-us/HT211861\">Rosetta</a>. Rosetta is Mac software to run Intel Mac terminal commands on an M1 Mac. My issue initially came from trying to use <a href=\"https://github.com/pyenv/pyenv\">Pyenv</a> to install and use different versions of <a href=\"https://www.python.org/\">Python</a> across multiple projects. After installing Rosetta, I initially used it by adding a custom flag to commands like this <code>arch -x86_64</code> <command>. This worked for me but was really error prone, <em>‚ÄúDid I forget the flag? Did I add the flag in the correct place?‚Äù</em>.</command></p>\n<hr>\n<p>This document describes solving M1 Mac vs Intel Mac terminal command discrepancies by creating a copy of your terminal and setting it up to run Intel Mac terminal commands using Rosetta. Although the process of making a Rosetta terminal is documented on the internet, I don‚Äôt feel it‚Äôs clear how few steps are involved in creating and using a Rosetta terminal!</p>\n<h3><em>This document provides the few steps needed to create a Rosetta terminal so you can run Intel Mac commands on your M1 Mac like a boss!</em></h3>\n<p>If you follow these steps, you can still use your current terminal the same plus you will have a terminal that can run Intel Mac commands using Rosetta. This document focuses on iTerm with zsh but the same functionality can be applied to other terminal apps or shells.</p>\n<hr>\n<h2>Why is it useful to run Intel Mac commands?</h2>\n<p>Many people use terminal tools everyday, like <a href=\"https://github.com/pyenv/pyenv\">pyenv</a>, that are much easier to use with an M1 Mac by running Intel Mac commands using <a href=\"https://support.apple.com/en-us/HT211861\">Rosetta</a>. In fact, some tools may even impossible to use without Rosetta!</p>\n<hr>\n<h3><em>For example:</em></h3>\n<ul>\n<li>If you're working on a Python project which is pinned to a <strong><em>specific version of Python and has pinned dependency versions</em></strong>,</li>\n<li>It may be impossible to successfully intall the project's dependencies unless <strong><em>you run Intel Mac install commands using Rosetta</em></strong>.</li>\n<li>Furthermore, if you then install Rosetta and successfully install a project's dependencies by run Intel Mac commands,</li>\n<li>You may find you're unable to install multiple <strong><em>other projects dependencies  or other versions of Python</em></strong>.</li>\n</ul>\n<h3><em>Figuring out versions and dependency versions like this can take up a lot time!</em></h3>\n<hr>\n<h2>Why is it useful to run Intel Mac commands on a separate terminal setup to run Intel Mac commands?</h2>\n<p>After you‚Äôve run Intel Mac commands using Rosetta, you may be 100% fine!</p>\n<p>Maybe you‚Äôre fine just adding the flag <code>arch -x86_64 &#x3C;command></code>. Maybe you don‚Äôt use Homebrew or if you do, you‚Äôve setup different homebrew paths with fun names like <code>brew</code> and <code>ibrew</code> and haven‚Äôt had any problems.</p>\n<p>If that‚Äôs the case, the rest of this doc isn‚Äôt for you! Otherwise, <strong>read on!</strong></p>\n<hr>\n<h3>*<em>Personal Intel Mac command journey:</em></h3>\n<ul>\n<li>I found, when trying to install different Python versions using Pyenv, that it was getting more complex as I worked on more projects. I found myself searching stackoverflow, pyenv issues, and various popular Python package issue which told me to run Intel Mac commands or to add various flags to commands to get them to run correctly.</li>\n<li>Although, I initially found some worthwhile learnings debugging why clang didn't work with a certain flag, this time was mainly trying commands I found versus working on projects.</li>\n</ul>\n<hr>\n<p>If your *personal Intel Mac command journey is similar to mine, I highly recommend setting up a separate terminal app to run Intel Mac commands. Setting up the terminal takes minutes and works seamlessly with your normal terminal. Read on!</p>\n<hr>\n<h2>Quickly setting up a seamless Rosetta Copy Terminal on your M1 Mac</h2>\n<p>The following paragraphs are aimed to help you setup your terminal copy which will run Intel Mac commands using Rosetta in about 5 minutes (or less) of *\"hands on keyboard\" code time.</p>\n<hr>\n<p>*Intalling Homebrew brews for Rosetta <strong>will take more time</strong>‚Äîbut you can run that job in\nanother terminal tab.</p>\n<hr>\n<p><a href=\"https://www.loom.com/share/6e13a22cb50e421cb17afa627dfec322\"><img src=\"https://cdn.loom.com/sessions/thumbnails/6e13a22cb50e421cb17afa627dfec322-with-play.gif\" alt=\"Loom Video about setting up M1 Mac for Rosetta\"></a></p>\n<h3>Setting up a seperate Terminal App using Rosetta</h3>\n<p>There is good documentation (click links below) for setting up a seperate Rosetta Terminal so this post will cover that very quickly.</p>\n<ol>\n<li>Copy your preferred terminal and save it to use <a href=\"https://support.apple.com/en-us/HT211861\">Rosetta</a>, <a href=\"https://i.stack.imgur.com/yit7K.png\">view image reference</a></li>\n<li>Rename your terminal to your liking, <a href=\"https://i.stack.imgur.com/XqDDR.png\">view image reference</a></li>\n<li>Set your new terminal to use Rosetta, <a href=\"https://i.stack.imgur.com/4nG6B.png\">view image reference</a></li>\n</ol>\n<hr>\n<p>That‚Äôs it! Your separate terminal is setup. It has no effect on the terminal you were using before. But, now you can use your new terminal to run Intel Mac commands on your M1 Mac with ease.</p>\n<p>However, from my perspective, there are a few confusing things which make this copied terminal still feel incomplete.</p>\n<ul>\n<li>There is nothing to give me a visual queue about what terminal is being used</li>\n<li>There is no clear way to run commands like <code>brew install</code> between the 2 terminal apps</li>\n</ul>\n<p>If you‚Äôre like me and would like this sort of clarity and functionality, <strong>read on</strong>!</p>\n<hr>\n<h3>Add Pizazz to your Seperate Terminal Apps</h3>\n<p>Once you've set up your Rosetta Terminal. You want to enable some simple tools to help you with which terminal you're using. I do this with a few commands. See the <code>.zshrc_example</code> below or view the code comments below.</p>\n<h4>1. Make a name for your new terminal</h4>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\"><span class=\"token comment\"># useful for differentiating between terminals</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>arch<span class=\"token variable\">)</span></span> <span class=\"token operator\">=</span> <span class=\"token string\">\"i386\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n</span><span class=\"code-line\">  <span class=\"token assign-left variable\">TITLE</span><span class=\"token operator\">=</span><span class=\"token string\">\"Rosetta iTerm ü™®\"</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">else</span>\n</span><span class=\"code-line\">  <span class=\"token assign-left variable\">TITLE</span><span class=\"token operator\">=</span><span class=\"token string\">\"iTerm üîÆ\"</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">fi</span><span class=\"token punctuation\">;</span>\n</span></code></pre>\n<h4>2. Setup your brew installs</h4>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\"><span class=\"token comment\"># with either rosetta or arm based on which terminal you are using</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>arch<span class=\"token variable\">)</span></span> <span class=\"token operator\">=</span> <span class=\"token string\">\"i386\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n</span><span class=\"code-line\">    <span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">brew</span><span class=\"token operator\">=</span><span class=\"token string\">'/usr/local/homebrew/bin/brew'</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">else</span>\n</span><span class=\"code-line\">    <span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">brew</span><span class=\"token operator\">=</span><span class=\"token string\">'/opt/homebrew/bin/brew'</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">fi</span><span class=\"token punctuation\">;</span>\n</span></code></pre>\n<h4>3. Add a function to update your terminal tab's name and working directory</h4>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\"><span class=\"token function-name function\">precmd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">  <span class=\"token assign-left variable\">CURRENT</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>print <span class=\"token parameter variable\">-P</span> %3~<span class=\"token variable\">)</span></span>\n</span><span class=\"code-line\">  <span class=\"token builtin class-name\">echo</span> <span class=\"token parameter variable\">-ne</span> <span class=\"token string\">\"<span class=\"token entity\" title=\"\\e\">\\e</span>]1;<span class=\"token variable\">${TITLE}</span>, <span class=\"token variable\">${CURRENT<span class=\"token operator\">##</span>*<span class=\"token operator\">/</span>}</span><span class=\"token entity\" title=\"\\a\">\\a</span>\"</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre>\n<hr>\n<h3>Controlling your terminal profile‚Äîno problemo</h3>\n<p>Now that you've setup your Rosetta Terminal, check your setup by setting up homebrew in for Rosetta if you haven't</p>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\">/bin/bash <span class=\"token parameter variable\">-c</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class=\"token variable\">)</span></span>\"</span>\n</span></code></pre>\n<p>Install dependencies you need for Rosetta. In my case, I want to install for <a href=\"https://github.com/pyenv/pyenv/\">pyenv</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\">brew update\n</span><span class=\"code-line\">brew <span class=\"token function\">install</span> pyenv\n</span></code></pre>\n<p>Then, in my case, using ZSH</p>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'export PYENV_ROOT=\"$HOME/.pyenv\"'</span> <span class=\"token operator\">>></span> ~/.zshrc\n</span><span class=\"code-line\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'command -v pyenv >/dev/null || export PATH=\"$PYENV_ROOT/bin:$PATH\"'</span> <span class=\"token operator\">>></span> ~/.zshrc\n</span><span class=\"code-line\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'eval \"$(pyenv init -)\"'</span> <span class=\"token operator\">>></span> ~/.zshrc\n</span></code></pre>\n<p>If you look at the <code>.zshrc</code> example below, it is what I'm currently using with up-to-date OS and brews for both regular M1 and Rosetta. <em>No crazy flags for installing new versions of python, etc.</em></p>\n<p>I can install new Python versions using Pyenv in my Rosetta Terminal by running:</p>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\">pyenv <span class=\"token function\">install</span> <span class=\"token operator\">&#x3C;</span>python-version<span class=\"token operator\">></span>\n</span></code></pre>\n<p>And, then I have access to using that version of python in <strong><em>both terminals</em></strong> after a successful install!</p>\n<p>If I need to do anything custom I can add that to a bash function or to one of my if-else statements‚Äî<strong><em>no problemo!</em></strong></p>\n<hr>\n<h2>Wrap-up</h2>\n<p>M1 Macs have been great for me! Personally, until I needed to use different versions of python using pyenv, I had no reason for a Rosetta Terminal. But, once I needed to install/use different versions of python using pyenv, the time I was spending debugging quickly added up.</p>\n<p>The separate Rosetta Terminal setup takes very little time and is minimal effort. After setting it up, I feel fully in-control of being about to debug issues between M1 vs Intel processors. On top of all the great notes and articles (see my reference comment below) about doing this, this is my take on setting up a seperate Rosetta Terminal, how easy it is to do, and why you might want to do it!</p>\n<p>To view a gist with a sample <code>.zshrc</code> file, <a href=\"https://gist.github.com/yowainwright/5f0698b1cd120eeb0845e150a4ae44d4\">click here</a>.</p>","slug":"m1-intel-terminal-cmds-like-a-boss"},"__N_SSG":true}