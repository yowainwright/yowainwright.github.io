{"pageProps":{"frontmatter":{"title":"Reframing content responsively with Reframe.js","meta":"Reframing content, one of the most important things to present well on a content site is embedded content.","categories":["code","js","javascript"],"date":"September 19, 2016","path":"/reframing-content"},"content":"<p>The most meaningful part of the webpage, the content, can be a largely unknown thing. Authors create content in one place &#x26; expect it to render well in another. Embedded content adds another level of complexity to this process.</p>\n<p>Embedded content, like videos, images, podcasts &#x26; tweets often do not translate well to a fluid webpage - so we need to reframe them. This is what <a href=\"https://dollarshaveclub.github.io/reframe.js/\">Reframe.js</a> does. It wraps embedded content in an <a href=\"http://alistapart.com/article/creating-intrinsic-ratios-for-video\">intrinsic ratio</a> of the original embed but with fluid sizing so that the embedded content looks great at any size.</p>\n<p data-height=\"380\" data-theme-id=\"0\" data-slug-hash=\"qaaGYV\" data-default-tab=\"result\" data-user=\"yowainwright\" data-embed-version=\"2\" class=\"codepen\">See the Pen <a href=\"http://codepen.io/yowainwright/pen/qaaGYV/\">Intrinsic Ratio Animation</a> by Jeff Wainwright (<a href=\"http://codepen.io/yowainwright\">@yowainwright</a>) on <a href=\"http://codepen.io\">CodePen</a>.</p>\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>\n<h2>Why Reframe.js?</h2>\n<p>Previous to writing this plugin, I used <a href=\"http://fitvidsjs.com/\">FitVids</a>. FitVids is a great plugin for solving reframing videos. It's written by 2 of my idols, <a href=\"http://chriscoyier.net/\">Chris Coyier</a> &#x26; <a href=\"http://daverupert.com/\">Dave Ruppert</a>. Fitvids <em>takes a chance</em> that most of your content will be 1 of 5 <code>selectors</code>. If those assumptions are correct (&#x26; if you're using jQuery) - FitVids is golden. If not, there might need to be little extra code on top of the little extra code added that assumes your embedded content will be 1 of 5 <code>selectors</code>. The reason that Reframe.js was originally made was because <a href=\"http://jquery.com/\">jQuery</a> was not being used on a new product at <a href=\"http://dollarshaveclub.com\">DSC</a>.</p>\n<p>Reframe.js also:</p>\n<ol>\n<li>doesn't assume your reframing just videos (by name at least),</li>\n<li>offers a css mixin rather than inlining css which can make your dom (html) cleaner</li>\n<li>&#x26; offers jQuery plugin that is written in such a way that if unused - it can be shaken out with <a href=\"https://medium.com/@Rich_Harris/tree-shaking-versus-dead-code-elimination-d3765df85c80#.ccnp22e5f\">Tree shaking</a>.\nThese things make the code lighter initially.</li>\n</ol>\n<h2>Options</h2>\n<p>The one option supported by Reframe.js is the ability to add your own css class instead of the default css class <code>js-reframe</code>. This is so that the end result of using the library on a webpage is minimal - just 1 inline style added (for the intersic ratio).</p>\n<p>Reframe.js's simplicity in both language &#x26; options is meant to make the plugin easy to understand &#x26; easy to write code to support your product's end goal.</p>\n<h2>Plugin Breakdown</h2>\n<p><strong>CSS (aspect ratio)</strong></p>\n<p>In this sass mixin, the default aspect ratio is 16:9 but we can override that to make the reframe a perfect ratio of the embed's original size.</p>\n<pre class=\"language-css\"><code class=\"language-css code-highlight\"><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token atrule\"><span class=\"token rule\">@mixin</span> <span class=\"token function\">reframe</span><span class=\"token punctuation\">(</span>$<span class=\"token property\">el</span><span class=\"token punctuation\">:</span> iframe<span class=\"token punctuation\">,</span> $<span class=\"token property\">paddingTop</span><span class=\"token punctuation\">:</span> <span class=\"token number\">56.25</span><span class=\"token unit\">%</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">  <span class=\"token property\">padding-top</span><span class=\"token punctuation\">:</span> $paddingTop<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  <span class=\"token selector\">#</span><span class=\"token punctuation\">{</span>$el<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">    <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">    <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span>\n</span><span class=\"code-line\">\n</span></code></pre>\n<p><strong>JavaScript</strong></p>\n<p>Wrap a selected element in a <code>div</code>.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token keyword\">const</span> frame <span class=\"token operator\">=</span> element <span class=\"token comment\">// frame is the elmeent to be wrapped</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">const</span> div <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">frame<span class=\"token punctuation\">.</span><span class=\"token property-access\">parentNode</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">insertBefore</span><span class=\"token punctuation\">(</span>div<span class=\"token punctuation\">,</span> frame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">frame<span class=\"token punctuation\">.</span><span class=\"token property-access\">parentNode</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">removeChild</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">div<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">appendChild</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></code></pre>\n<p>Add padding to create an intrinsic ratio.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token comment\">// where the frame is the element &#x26; the div is the added wrapper element</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">const</span> height <span class=\"token operator\">=</span> frame<span class=\"token punctuation\">.</span><span class=\"token property-access\">offsetHeight</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">const</span> width <span class=\"token operator\">=</span> frame<span class=\"token punctuation\">.</span><span class=\"token property-access\">offsetWidth</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">const</span> padding <span class=\"token operator\">=</span> height <span class=\"token operator\">/</span> width <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">div<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">paddingTop</span> <span class=\"token operator\">=</span> padding <span class=\"token operator\">+</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">\n</span></code></pre>\n<p>Make a plugin for jQuery or <a href=\"http://zeptojs.com/\">Zepto</a>.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">$</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">  <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">$</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">fn</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">    <span class=\"token function-variable function\">reframe</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">reframeFunc</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">      <span class=\"token keyword control-flow\">return</span> <span class=\"token function\">reframe</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> cName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">    <span class=\"token punctuation\">}</span>\n</span><span class=\"code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span>\n</span><span class=\"code-line\">\n</span></code></pre>\n<p>Add a check to the top of the plugin which allows us to select the element to reframe with jquery <em>or</em> plain js (Kudos to <a href=\"http://jakiestfu.com/\">Jacob Kelley</a> here).</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token keyword\">let</span> frames <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> target <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">?</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelectorAll</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> target<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">'length'</span> <span class=\"token keyword\">in</span> frames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">  frames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>frames<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span>\n</span><span class=\"code-line\">\n</span></code></pre>\n<p>Here's the code you write.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token function\">reframe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'selector'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">\n</span></code></pre>\n<p data-height=\"380\" data-theme-id=\"0\" data-slug-hash=\"Gjjbak\" data-default-tab=\"css,result\" data-user=\"yowainwright\" data-embed-version=\"2\" class=\"codepen\">See the Pen <a href=\"http://codepen.io/yowainwright/pen/Gjjbak/\">Reframe.js jQuery Demo</a> by Jeff Wainwright (<a href=\"http://codepen.io/yowainwright\">@yowainwright</a>) on <a href=\"http://codepen.io\">CodePen</a>.</p>\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>\n<h2>To Dos</h2>\n<p>Currently, I'm playing with the idea of removing the default padding of the ratio (56.25%) that's in the <code>css</code> because it is overwritten every time the plugin is called.\nAlso, I think I will be adding a docs folder for using the plugin &#x26; specific use cases that might come up.</p>\n<h2>Summary</h2>\n<p>One of the fun challenges when writing code for content is to support creativity in a controlled way. Reframe.js is a great solve for making embedded content look great on your website. Initially, we didn't know if we would be using jQuery for our product at <a href=\"https://www.dollarshaveclub.com/\">DSC</a> so <a href=\"http://fitvidsjs.com/\">FitVids</a> was out of the question - which led me down the path of writing some new code. The end result was Reframe.js. Hope it works well for you if you use it.</p>\n<p>I plan on writing more lightweight plugins to solve common content problems in the future. If you have questions or ideas in regards to <a href=\"https://github.com/dollarshaveclub/reframe.js\">Reframe.js</a> please contact me - links below.</p>","slug":"reframing-content"},"__N_SSG":true}