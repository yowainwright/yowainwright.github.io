{"pageProps":{"frontmatter":{"title":"A 'little deep' dive into Dependabot and Snyk Ingore Configs","meta":"This article focuses on Snyk and Dependabots' ignore configs (ignores) from a DevX perspective.","categories":["code","yaml","security"],"date":"February 12, 2022","path":"/snyk-dependabot-ignore-configs"},"content":"<p>Snyk and Dependabot are dependency management tools. At an initial glance, they do the same thing. They both submit pull requests to update a repository's dependencies. For this article, I will focus on each tool's config file and how the config file fits into developer workflow and developer experience (DevX). More specifically, I will focus on the <code>ignore</code> section of each dependency management tool's config file.</p>\n<hr>\n<p><strong>Quick note:</strong> I use and like both Snyk and Dependabot. My perspective on each of the products is my opinion. I am happy to learn where I'm wrong and don't feel like a power user. However, I do use both tools everyday.</p>\n<hr>\n<h2>Context</h2>\n<p>Developer workflow and DevX are key parts of security and code maintenance. If a developer enjoys the DevX of some code or coding tools, they'll be loyal to it and make it do things no one ever expected—see JavaScript for reference (yes, a joke). However, if a developer doesn't enjoy the DevX of some code or coding tool, they'll look for reasons <em>and ways</em> not to use it. DevX is key to explaining why I feel Dependabot's <code>dependabot.yml</code> is optimal to the <code>.snyk</code> file right now.</p>\n<p>It could be said that the <code>dependabot.yml</code> and <code>.snyk</code> files are so different they're not comparable. I don't disagree. However, for both config files, I use one feature specifically for security and saving time. The <code>ignore</code> sections! The <code>ignore</code> section of both config file types is used to specify to the tool (Snyk or Dependabot) modules of code to <code>ignore</code>.</p>\n<h2>Snyk Ignore</h2>\n<p>The <code>.snyk</code> ignore key is used along with the Snyk CLI. Ignores are used to ignore dependencies with anticipated security issues. This can be useful for a few reasons. First, <code>ignores</code> allow users to ignore dependencies that can't currently be updated. This can be useful when needing to do major updates to support a dependency's updates—think major version updates.  Second, <code>ignores</code> can help avoid Snyk misread security issues. For example, Snyk's CLI ignores Classic Yarn's (Yarn 1's) <code>resolutions</code> object within a <code>package.json</code> when assessing dependency security issues (2.15.22).</p>\n<p>In the section below, there are a few code snippets to go along with my comments from the paragraphs above.</p>\n<h3>Snyk CLI</h3>\n<p>By running</p>\n<pre class=\"language-bash\"><code class=\"language-bash code-highlight\"><span class=\"code-line\">snyk ignore <span class=\"token parameter variable\">--id</span><span class=\"token operator\">=</span>SNYK-JS-BROWSERSLIST-1090194\n</span></code></pre>\n<p>A file with<code>yaml</code>-like syntax is output</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml code-highlight\"><span class=\"code-line\"><span class=\"token comment\"># Snyk (https://snyk.io) policy file, patches or ignores known vulnerabilities.</span>\n</span><span class=\"code-line\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> v1.22.1\n</span><span class=\"code-line\"><span class=\"token comment\"># ignores vulnerabilities until expiry date; change duration by modifying expiry date</span>\n</span><span class=\"code-line\"><span class=\"token key atrule\">ignore</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">  <span class=\"token key atrule\">SNYK-JS-BROWSERSLIST-1090194</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">'*'</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">        <span class=\"token key atrule\">reason</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">></span><span class=\"token punctuation\">-</span>\n</span><span class=\"code-line\">          This will be captured within the root `package.json` resolutions\n</span><span class=\"code-line\">          object\n</span><span class=\"code-line\">        <span class=\"token key atrule\">expires</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2022-02-23T22:40:13.244Z</span>\n</span><span class=\"code-line\">        <span class=\"token key atrule\">created</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2022-01-24T22:40:13.250Z</span>\n</span></code></pre>\n<p>If there is already a <code>.snyk</code> file, the new ignore is appended to the existing file. From there, the implementing developer can specify an <code>expires</code> time as well as a <code>reason</code>.</p>\n<h2>Dependabot Ignore</h2>\n<p>Dependabot doesn't have a CLI. Dependency updates are done using <a href=\"https://en.wikipedia.org/wiki/Cron\">cron jobs</a>. Cron jobs can be set to run at specific times and intervals which are easily configurable via the <code>dependabot.yml</code> file. To edit dependabot ignores, just update the <code>dependabot.yml</code> file. Ignores are specific dependency. You can supply a specific version of a dependency or you can key off of a semver range of versions.</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml code-highlight\"><span class=\"code-line\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n</span><span class=\"code-line\"><span class=\"token key atrule\">updates</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">package-ecosystem</span><span class=\"token punctuation\">:</span> npm\n</span><span class=\"code-line\">  <span class=\"token key atrule\">directory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/\"</span>\n</span><span class=\"code-line\">  <span class=\"token key atrule\">schedule</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">    <span class=\"token key atrule\">interval</span><span class=\"token punctuation\">:</span> weekly\n</span><span class=\"code-line\">    <span class=\"token key atrule\">time</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"13:00\"</span>\n</span><span class=\"code-line\">  <span class=\"token key atrule\">open-pull-requests-limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n</span><span class=\"code-line\">  <span class=\"token key atrule\">ignore</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dependency-name</span><span class=\"token punctuation\">:</span> eslint\n</span><span class=\"code-line\">        <span class=\"token key atrule\">versions</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">          <span class=\"token punctuation\">-</span> 7.32.0\n</span><span class=\"code-line\">        <span class=\"token key atrule\">update-types</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"version-update:semver-patch\"</span><span class=\"token punctuation\">]</span>\n</span></code></pre>\n<p><strong>Note:</strong> in the <code>yaml</code> example above, dependencies are specified, versions are set, and an <code>update-types</code> is set to insure that dependencies are installed within a patch version release of the specified dependency.</p>\n<h2>Comparisons</h2>\n<p>Snyk <code>ignores</code> can be set via Snyk's CLI whereas Dependabot requires editing the repository's <code>dependabot.yml</code>. Snyk's CLI specifies ignores to <strong>Snyk specific</strong> security checks whereas Dependabot's ignores are set for specific dependencies set by a repository's maintainers. Dependabot supports version specificity whereas Snyk sets ignores versioning to it's own issue set.</p>\n<p>Snyk takes more control over dependency management and than Dependabot. It's ignores are specific to Snyk and dependency management is as well. This can get confusing in monorepos especially because when simply installing, by running <code>yarn</code> in example, security vulnerabilities can arise for dependency dependencies updates that were fixed in other Snyk Pull Requests. The devX of this experience in not good because it feels like there are pull requests and vulnerabilities that go back and forth according to Snyk's security reporting and corresponding pull requests. Furthermore, the <code>.snyk</code> file ignores are specific to Snyk which forces me to either run the Snyk CLI or go to <a href=\"https://snyk.io/\">Snyk's site</a>. Furthermore, Snyk ignores require a time to be set. This a weirdly non-productive thing to have to consider and isn't easily supported by the CLI.</p>\n<p>I feel although Dependabot requires manual <code>dependabot.yml</code> updates, specifying ignores to specific dependencies that are causing errors is much clearer DevX. Being able to control cron jobs is useful too—so the repository isn't bombarded with pull requests all of the time. Snyks CLI is useful. Being able to search for dependency issues is great but the weirdness of setting up <code>ignores</code>: copying the Snyk specific error id and manually adding a time immediately takes away from the Snyk CLI.</p>\n<h2>Update—After Writing Most of this Article</h2>\n<p>After writing most of this article, I downloaded the Snyk VSCode Extension. The Snyk VSCode extension doesn't disappoint. It provides the same feedback as Snyk's CLI, but via dialogue messages in a <code>package.json</code> file. It takes a bit for the <code>package.json</code> file to display the dialogues but once they're displayed, they're very useful.</p>\n<h2>Conclusions</h2>\n<p>Snyk provides useful interfaces for discovering security issues. I perceive Snyk's approach to require more context into <em>it's</em> software than what I'd like. All of the issues it finds are pinned to Snyk issues.</p>\n<p>In example, this is how Snyk writes it's security issues</p>\n<pre class=\"language-txt\"><code class=\"language-txt code-highlight\"><span class=\"code-line\">SNYK-JS-BROWSERSLIST-1090194\n</span></code></pre>\n<p>Dependabot provides ways to update dependencies. It provides updates or the ability to ignore updates based on the repository's dependencies—no need to have context into another interface—like Snyk.</p>\n<pre class=\"language-yml\"><code class=\"language-yml code-highlight\"><span class=\"code-line\"><span class=\"token key atrule\">ignore</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">dependency-name</span><span class=\"token punctuation\">:</span> eslint\n</span><span class=\"code-line\">    <span class=\"token key atrule\">versions</span><span class=\"token punctuation\">:</span>\n</span><span class=\"code-line\">    <span class=\"token punctuation\">-</span> 7.32.0\n</span></code></pre>\n<p>I prefer Dependabot's approach because it requires less context and it's context relates specifically to the dependency used in the effected repository.</p>\n<p>However, when considering how I work and how I update security vulnerabilities, Snyk's CLI and VSCode Plugin give me a way to make updates without needing to be aware of Github at all which does assist me in keep my work off the browser and in the code.</p>\n<p>All of this to write, both tools are cool but I find Dependabot's devX to be a bit better. If Snyk's issues weren't specific to it's software, my opinion on which tool (Snyk or Dependabot) to choose for my personal projects would be harder to make.</p>\n<hr>\n<p><strong>Further reading</strong></p>\n<p>Get more information about Snyk's CLI and the <code>.snyk</code> ignore config <a href=\"https://docs.snyk.io/features/snyk-cli/commands/ignore\">here</a>. Read much more about Dependabot's config <a href=\"https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/configuration-options-for-dependency-updates\">here</a>. Check out the Snyk VSCode plugin <a href=\"https://docs.snyk.io/features/integrations/ide-tools/visual-studio-code-extension-for-snyk-code\">here</a>.</p>\n<hr>\n<p>Please keep in mind, I'm just a user! I use both tools everyday. I love that Snyk is pushing security forward.\nPlease reach out if you have suggestions or to communicate something I'm wrong about in this post!</p>\n<p>Happy Hacking!</p>","slug":"snyk-dependabot-ignore-configs"},"__N_SSG":true}